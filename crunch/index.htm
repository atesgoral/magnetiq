<html>
<head>
<title>Crunch!</title>
<style>
    body {
        background-color: #B3B3B3;
        margin: 30px;
        padding: 0;
        font-family: Verdana;
    }

    td {
        font: 11px Verdana;
    }
        
    form {
        margin: 0px;
        padding: 0px;
    }

    img.crunch {
        position: absolute;
        border: none;
    }
    
    .footer {
        font-size: 11px;
        padding-top: 30px;
    }
    
    #stats {
        padding-bottom: 8px;
        font-size: 13px;
    }
    
    .upload {
        background-image: url(i/big_bar.gif);
        text-align: right;
        font-size: 9px;
    }
</style>

<script>
    var g_next = new Object();
    
    function ge(id)
    {
        return document.getElementById(id);
    }
   
    function onImgClick()
    {
        ge('img').style.clip = 'rect(' +
            g_next.y + 'px ' +
            (g_next.x + g_next.width) + 'px ' +
            (g_next.y + g_next.height) + 'px ' +
            g_next.x + 'px' +
            ')';
        
        return true;
    }
    
    function thousands(n)
    {
        var str = "  " + n;
        
        return str.substr(str.length % 3).match(/([\s0-9]{3})/g).join(",").replace(/^\s*/g, "").bold();
    }
    
    function onServe()
    {
        ge('client').innerHTML = server.document.body.innerHTML;

        var item_data = server.document.title.split('_');
        
        if (10 == item_data.length)
        {
            g_next.x = item_data[1];
            g_next.y = item_data[2];
            g_next.width = item_data[3];
            g_next.height = item_data[4];
            
            var img = ge('img');
            
            var stats = thousands(item_data[6]) + " pixels in " +
                thousands(item_data[7]) + " bytes in " +
                thousands(item_data[5]) + " image";
            
            if (item_data[5] > 1)
            {
                stats += "s crunched to " +
                thousands(img.width * img.height) + " pixels in " + 
                thousands(item_data[9]) + " bytes";
            }
            
            stats += ".";
                
                
            ge('stats').innerHTML = stats;
        }
    }
</script>
</head>

<body>

<form action="crunch.php" method="post" target="server" enctype="multipart/form-data">

<table width="462" height="462" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="30" height="30"><img src="i/big_rnd_top_left.gif" width="30" height="30" alt=""></td>
        <td width="402" style="background-image: url(i/big_rnd_top.gif);">&nbsp;</td>
        <td width="30"><img src="i/big_rnd_top_rite.gif" width="30" height="30" alt=""></td>
    </tr>
    <tr>
        <td height="402" style="background-image: url(i/big_rnd_left.gif);">&nbsp;</td>
        <td style="background-color: #FFFFFF;" id="client">&nbsp;</td>
        <td style="background-image: url(i/big_rnd_rite.gif);">&nbsp;</td>
    </tr>
    <tr>
        <td height="30"><img src="i/big_rnd_bot_left.gif" width="30" height="30" alt=""></td>
        <td style="background-image: url(i/big_rnd_bot.gif);">&nbsp;</td>
        <td><img src="i/big_rnd_bot_rite.gif" width="30" height="30" alt=""></td>
    </tr>
    <tr><td colspan="3" height="6"></td></tr>
    <tr>
        <td width="30" height="30"><img src="i/big_rnd_top_left.gif" width="30" height="30" alt=""></td>
        <td width="402" style="background-image: url(i/big_rnd_top.gif);">&nbsp;</td>
        <td width="30"><img src="i/big_rnd_top_rite.gif" width="30" height="30" alt=""></td>
    </tr>
    <tr>
        <td style="background-image: url(i/big_rnd_left.gif);">&nbsp;</td>
        <td style="background-color: #FFFFFF;">
            <div id="stats">&nbsp;</div>
            <div>Click image to zoom in. Upload new image to crunch!</div>
        </td>
        <td style="background-image: url(i/big_rnd_rite.gif);">&nbsp;</td>
    </tr>
    <tr>
        <td height="30"><img src="i/big_rnd_bot_left.gif" width="30" height="30" alt=""></td>
        <td style="background-image: url(i/big_rnd_bot.gif);">&nbsp;</td>
        <td><img src="i/big_rnd_bot_rite.gif" width="30" height="30" alt=""></td>
    </tr>
    <tr><td colspan="3" height="6"></td></tr>
    <tr>
        <td height="60"><img src="i/big_bar_left.gif" width="30" height="60" alt=""></td>
        <td class="upload">JPEG, GIF or PNG: <input type="file" name="m">&nbsp;<input type="submit" value="Crunch!"></td>
        <td ><img src="i/big_bar_rite.gif" width="30" height="60" alt=""></td>
    </tr>
</table>

<div class="footer">
    <b>Crunch!</b> may be:
    <ol>
        <li>An alternative take on the "click thumbnail to enlarge" navigation paradigm.</li>
        <li>A perversive way for storing pictures online.</li>
        <li>Among the last standing iframe hacks in spite of the Ajax buzz.</li>
    </ol>
    Copyright &copy; 2004 - 2006 Ates Goral<br/>Disclaimer: Not responsible whatsoever for inappropriate images uploaded by random people.<br/>Back to <a href="/">magnetiq.com</a>
</div>

</form>

<iframe name="server" src="serve.php" onload="onServe()" style="display: none"></iframe>

</body>
</html>